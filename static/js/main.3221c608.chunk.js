(this["webpackJsonpfinanza-react"]=this["webpackJsonpfinanza-react"]||[]).push([[0],{34:function(e,t,a){e.exports=a(45)},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),c=a(32),i=a.n(c),l=a(17),o=a(10),u=a(4),s={RZOHy4ydImg8tZ9zFcqw:{notes:"Pizza with Joe",price:18.59,category:"\ud83c\udf55",date:"Jan 13 2022 13:06:14 GMT+0100 (CET)"},RZOHyAydImg8tZ9zscqw:{notes:"Jane's car",price:25.98,category:"\u26fd\ufe0f",date:"Jan 14 2022 13:06:14 GMT+0100 (CET)"},RNOHyAydImg8tZ9zFcqw:{notes:"Screwdriver",price:8.21,category:"\u2699\ufe0f",date:"Jan 15 2022 13:06:14 GMT+0100 (CET)"},RNOHyA5dImg8tZ9zFcqz:{notes:"Fresh market",price:109.34,category:"\ud83e\udd51",date:"Jan 16 2022 13:06:14 GMT+0100 (CET)"},RNOHyAydImg8tZsfFcqw:{notes:"Income",price:1e3,category:"\ud83d\udcb5",date:"Jan 17 2022 13:06:14 GMT+0100 (CET)"}};var d=a(0),m=a.n(d),f=a(2),p=a(28);function b(e){var t=JSON.stringify(e);return localStorage.setItem("auth",t)}function g(){var e=Object(p.b)(),t=new p.a;return t.setCustomParameters({prompt:"select_account"}),new Promise((function(a,n){Object(p.c)(e,t).then((function(e){a(e)})).catch((function(e){n(e)}))}))}function E(){return v.apply(this,arguments)}function v(){return(v=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return b(t=e.sent),e.abrupt("return",{auth:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return localStorage.removeItem("auth"),{auth:null,database:s}}var h=Object(n.createContext)(),y=function(e){var t=function(){var e=Object(n.useState)(s),t=Object(o.a)(e,2),a=t[0],r=t[1];return[a,function(e){console.log("addEntry"),r(Object(l.a)(Object(l.a)({},a),{},Object(u.a)({},100*Math.random(),e)))},function(e,t){console.log("updateEntry"),r(Object(l.a)(Object(l.a)({},a),{},Object(u.a)({},e,t)))},function(e){console.log("deleteEntry");var t=Object(l.a)({},a);delete t[e],r(t)}]}(),a=Object(o.a)(t,4),c=a[0],i=a[1],d=a[2],m=a[3],f=function(){var e=Object(n.useState)(window.navigator.onLine),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){window.addEventListener("online",(function(){return r(!0)})),window.addEventListener("offline",(function(){return r(!1)}))})),a}(),p=Object(n.useState)(!1),b=Object(o.a)(p,2),g=b[0],v=b[1],y=Object(n.useState)({auth:null,database:c,state:{isEditing:!1,editingId:null}}),j=Object(o.a)(y,2),w=j[0],N=j[1],C={addEntry:i,updateEntry:d,deleteEntry:m};function I(e){return N((function(t){return Object(l.a)(Object(l.a)({},t),e)}))}return Object(n.useEffect)((function(){I({database:c})}),[c]),r.a.createElement(h.Provider,{value:{context:w,updateContext:I,toggleEditing:function(e){return I(e?{state:{isEditing:!0,editingId:e}}:{state:{isEditing:!1,editingId:null}})},testDatabaseDAO:C,isOnline:f,isOpen:g,setOpen:v,login:E,logout:O}},e.children)},j=a(1),w=a(3),N=a(8),C=a(9),I=function(e){Object(N.a)(a,e);var t=Object(C.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"element"},r.a.createElement("h2",null,"Welcome to Finanza"),r.a.createElement("p",null,"Finanza is a Progressive Web App that helps you organize your personal and business spendings."),r.a.createElement("p",null,"It's built with the newest and safest technologies, securing your data with maximum privacy.")),r.a.createElement("section",{className:"element tutorial"},r.a.createElement("span",null,r.a.createElement("h3",null,"Add"),r.a.createElement("p",null,'Tap a category \ud83c\udf55 and press "enter" to submit.')),r.a.createElement("span",null,r.a.createElement("h3",null,"Edit"),r.a.createElement("p",null,'Tap on an entry, then press "enter" to commit.')),r.a.createElement("span",null,r.a.createElement("h3",null,"Delete"),r.a.createElement("p",null,"Swipe the entry to the left to reveal the \u274c button."))))}}]),a}(r.a.Component),k=a(33),x=a(18),D=Object(k.a)({apiKey:"AIzaSyCE5pA2JSdfAPD5qnWsEEvOXEx-pI4aeLk",authDomain:"finanza-react.firebaseapp.com",databaseURL:"https://finanza-react.firebaseio.com",projectId:"finanza-react",storageBucket:"finanza-react.appspot.com",messagingSenderId:"88000701371",appId:"1:88000701371:web:9b451832ac2b498fea1a9e"}),S=Object(x.e)(D);function M(e,t){var a=Object(x.g)(Object(x.b)(S,"users/".concat(e,"/expenses")));return Object(x.f)(a,(function(e){var a={};e.forEach((function(e){a[e.id]=e.data()})),t({database:a})}))}var z=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),u=l[0],s=l[1],d=Object(n.useState)(""),m=Object(o.a)(d,2),f=m[0],p=m[1],b=Object(n.useState)(""),g=Object(o.a)(b,2),E=g[0],v=g[1],O=Object(n.useContext)(h),y=O.context,j=O.toggleEditing,w=O.testDatabaseDAO,N=O.isOnline,C=Object(n.useRef)(null);function I(){j(),c(""),s(""),p(""),v("")}function k(e){var t=e.target.id;c(t)}function D(e){if(e.target.id===a)return c("");C.current.focus()}return Object(n.useEffect)((function(){if(!y.state.editingId)return I();c(y.database[y.state.editingId].category),s(y.database[y.state.editingId].date),p(y.database[y.state.editingId].price),v(y.database[y.state.editingId].notes)}),[y.state.editingId]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{id:"entry-form",onKeyDown:function(e){if(13===e.keyCode){if(!f)return I();var t={category:a||"\u2753",date:String(u?new Date(u):new Date),notes:E,price:Number(f)||0};y.auth?y.state.isEditing?function(e,t,a){console.log(e,t,a);var n=Object(x.d)(S,"users/".concat(e,"/expenses/").concat(t));Object(x.h)(n,a)}(y.auth.user.uid,y.state.editingId,t):function(e,t){Object(x.a)(Object(x.b)(S,"users/".concat(e,"/expenses")),t)}(y.auth.user.uid,t):y.state.editingId?w.updateEntry(y.state.editingId,t):w.addEntry(t),I()}}},!N&&r.a.createElement("div",{className:"element is-offline"},"You're offline."),r.a.createElement("div",{className:"display"},r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:u,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"Date",name:"date",className:"date"}),r.a.createElement("input",{value:E,onChange:function(e){var t=e.target.value;v(t)},type:"text",placeholder:"Notes",name:"notes",className:"notes"})),r.a.createElement("input",{ref:C,value:f,onChange:function(e){var t=e.target.value;p(t)},id:"display-amount",type:"number",placeholder:"$",name:"price",className:"amount"})),r.a.createElement("div",{className:"categories-selector"},P.map((function(e){var t=Object.keys(e)[0],n=e[t];return r.a.createElement("label",{onClick:D,htmlFor:t,key:t,className:n===a?null:"highlighted"},r.a.createElement("span",{role:"img","aria-label":"Emoji of "+t},n),r.a.createElement("input",{checked:n===a,onChange:k,type:"radio",id:n,name:"category"}))})))))},L=a(7);var F=a(27),T=a.n(F);T.a.settings={currency:{symbol:"$",decimal:".",thousand:",",precision:2},number:{precision:0,thousand:",",decimal:"."}},T.a.settings.currency.format={pos:"%s %v",neg:"%s (%v)",zero:"%s --"};var A=T.a;function B(e){var t=Object.keys(e.data).filter((function(t){return"\ud83d\udcb5"!==e.data[t].category})).map((function(t){return e.data[t].price})).reduce((function(e,t){return e+t}),0),a=Object.keys(e.data).filter((function(t){return"\ud83d\udcb5"===e.data[t].category})).map((function(t){return e.data[t].price})).reduce((function(e,t){return e+t}),0),n=a-t;return r.a.createElement("ul",{className:"summary"},r.a.createElement("li",null,r.a.createElement("h3",null,"Expenses"),r.a.createElement("p",null,A.formatMoney(t))),r.a.createElement("li",null,r.a.createElement("h3",null,"Income"),r.a.createElement("p",null,A.formatMoney(a))),r.a.createElement("li",null,r.a.createElement("h3",null,"Balance"),r.a.createElement("p",null,A.formatMoney(n))))}function J(e){var t=e.setSort,a=e.sortBy,n=e.inverted;function c(e){var t="";return e===a&&(t+="bold",n&&(t+=" inverted")),t}return r.a.createElement("div",{className:"description"},r.a.createElement("p",{onClick:t,className:c("type")},"Type"),r.a.createElement("p",{onClick:t,className:c("date")},"Date"),r.a.createElement("p",{onClick:t,className:c("price")},"Price"),r.a.createElement("p",{onClick:t,className:c("notes")},"Notes"))}function R(e){var t=e.setFilter,a=Object(n.useState)(null),c=Object(o.a)(a,2),i=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{onChange:function(e){var a=e.target.value;return l(a),t(a)},value:i,className:"list-search",placeholder:"Search...",type:"text"}))}var G=function(e){var t=Object(n.useState)({inverted:!1,sortBy:"date",endOfListTop:!0,endOfListBottom:!0}),a=Object(o.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),s=Object(o.a)(u,2),d=s[0],m=s[1],f=Object(n.useState)(N(e.data)),p=Object(o.a)(f,2),b=p[0],g=p[1],E=Object(n.useContext)(h),v=E.context,O=E.toggleEditing,y=E.testDatabaseDAO;function j(e){return O(),v.auth?function(e,t){Object(x.c)(Object(x.d)(S,"users/".concat(e,"/expenses/").concat(t)))}(v.auth.user.uid,e):y.deleteEntry(e)}function w(e){if(!e.target.className.includes("delete")){var t=e.target.parentElement.id;return t===v.state.editingId?O():O(t)}}function N(e){var t=Object(l.a)({},e),a=c.sortBy,n=Object.keys(t).sort((function(e,n){if("date"===a){if(new Date(t[e][a])<new Date(t[n][a]))return 1;if(new Date(t[e][a])>new Date(t[n][a]))return-1}if("price"===a){if(t[e][a]<t[n][a])return 1;if(t[e][a]>t[n][a])return-1}return t[e][a]<t[n][a]?-1:t[e][a]>t[n][a]?1:0}));c.inverted&&(n=n.reverse());var r,i={},o=Object(L.a)(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;i[u]=t[u]}}catch(s){o.e(s)}finally{o.f()}return i}return Object(n.useEffect)((function(){g(N(function(e){var t=Object.keys(e).filter((function(t){return e[t].notes.toLowerCase().includes(d.toLowerCase().trim())})),a={};return t.forEach((function(t){a[t]=e[t]})),a}(e.data)))}),[e.data,c.sortBy,c.inverted,d]),r.a.createElement("div",{className:"element"},r.a.createElement("div",{className:"title-search"},r.a.createElement("h2",{className:"title"},e.title),r.a.createElement(R,{setFilter:m})),r.a.createElement(B,{data:b}),r.a.createElement(J,{setSort:function(e){if(e.target.innerHTML.toLowerCase()===c.sortBy)return i((function(e){return Object(l.a)(Object(l.a)({},e),{},{inverted:!e.inverted})}));i(Object(l.a)(Object(l.a)({},c),{},{inverted:!1,sortBy:e.target.innerHTML.toLowerCase()}))},sortBy:c.sortBy,inverted:c.inverted}),r.a.createElement("div",{className:"list-wrapper"},r.a.createElement("div",{className:"list"},b&&Object.keys(b).map((function(e){return r.a.createElement("div",{className:v.state.isEditing&&v.state.editingId===e?"selected":"",key:e},r.a.createElement("div",{className:"entry",id:e,onClick:w},r.a.createElement("span",{className:"icon"},b[e].category),r.a.createElement("p",null,function(e){var t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate())}(b[e].date)),r.a.createElement("p",null,A.formatMoney(b[e].price)),r.a.createElement("p",null,b[e].notes),r.a.createElement("span",{role:"img","aria-label":"emoji",id:e,onClick:function(){return j(e)},className:"icon delete"},"\u274c")))})))))};function H(){var e,t=Object(n.useContext)(h),a=t.context,c=t.updateContext,i=t.isOpen,l=t.setOpen,o=t.login,u=t.logout,s=null===(e=a.auth)||void 0===e?void 0:e.user;return r.a.createElement("div",{className:"menu-plate"+(i?" blurred":" disabled")},r.a.createElement("div",{className:"menu"+(i?" open":"")},r.a.createElement("button",{onClick:function(){return l(!1)}},"Close Menu"),r.a.createElement("img",{src:null===s||void 0===s?void 0:s.photoURL,alt:"User profile image"}),r.a.createElement("h2",null,"Welcome, ",null===s||void 0===s?void 0:s.displayName),r.a.createElement("h3",null,null===s||void 0===s?void 0:s.email),a.auth?r.a.createElement("button",{className:"login",onClick:function(){return c(u())}},"Logout"):r.a.createElement("button",{className:"login",onClick:Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,o();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))},"Login with Google"),r.a.createElement("p",{className:"copyright"},"Copyright \xa9 ",(new Date).getFullYear()," Giorgio Cesaroni. All rights reserved.")))}var P=[{pizza:"\ud83c\udf55"},{gas:"\u26fd\ufe0f"},{utility:"\u2699\ufe0f"},{groceries:"\ud83e\udd51"},{income:"\ud83d\udcb5"}],Z=function(){var e=Object(n.useContext)(h),t=e.context,a=e.updateContext,c=e.isOnline,i=e.isOpen,l=e.setOpen;e.handleLogin,e.handleLogout;return Object(n.useEffect)((function(){var e,n=function(){var e=localStorage.getItem("auth");return e?JSON.parse(e):null}();return(null===(e=t.auth)||void 0===e?void 0:e.user)?M(t.auth.user.uid,a):!t.auth&&n?(a({auth:n}),M(n.user.uid,a)):void 0}),[t.auth]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement("div",{className:"App"+(c?"":" offline")+(i?" disabled":"")},r.a.createElement("button",{onClick:function(){return l(!i)},className:"open-menu"},"Open Menu"),r.a.createElement(z,null),r.a.createElement("main",null,!t.auth&&r.a.createElement(I,null),r.a.createElement(G,{title:"This Month",data:function(e){if(e){var t={};for(var a in e)new Date(e[a].date).getMonth()===(new Date).getMonth()&&(t[a]=e[a]);return t}}(t.database)}),r.a.createElement(G,{title:"Last Month",data:function(e){if(e){var t={};for(var a in e)new Date(e[a].date).getMonth()===(new Date).getMonth()-1&&new Date(e[a].date).getFullYear()===(new Date).getFullYear()&&(t[a]=e[a]);return t}}(t.database)}),r.a.createElement(G,{title:"Up To Date",data:t.database}))))};a(41),a(42),a(43),a(44);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null,r.a.createElement(Z,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.3221c608.chunk.js.map